# โ ะะพะฑะธะปัะฝะฐั ะพะฟัะธะผะธะทะฐัะธั CatalogPage - ะคะธะฝะฐะปัะฝะฐั ะฒะตััะธั

## ๐ฏ ะะตะฐะปะธะทะพะฒะฐะฝะฝัะต ะธะทะผะตะฝะตะฝะธั:

### 1. **ะะตัะตะฒะพะดั ะดะพะฑะฐะฒะปะตะฝั** โ
- โ `show_map` - "ะะพะบะฐะทะฐัั ะบะฐััั" / "Nรคita kaarti" / "Show Map"  
- โ `hide_map` - "ะกะบัััั ะบะฐััั" / "Peida kaart" / "Hide Map"
- โ `expand_map` - "ะะฐะทะฒะตัะฝััั ะบะฐััั" / "Laienda kaarti" / "Expand Map"
- โ `collapse_map` - "ะกะฒะตัะฝััั ะบะฐััั" / "Ahenda kaarti" / "Collapse Map"
- โ `tap_to_interact` - "ะะฐะถะผะธัะต ะดะปั ะฒะทะฐะธะผะพะดะตะนััะฒะธั" / "Puuduta interaktiivseks" / "Tap to Interact"

**ะคะฐะนะป:** [i18n.js](frontend/src/i18n.js) - ะฒัะต ะฟะตัะตะฒะพะดั ะดะปั RU, ET, EN

---

### 2. **ะะฐััะฐ ะกะะะซะขะ ะฟะพ ัะผะพะปัะฐะฝะธั ะฝะฐ ะผะพะฑะธะปะบะต** โ

#### ะะฐะบ ัะฐะฑะพัะฐะตั:
1. ะัะธ ะทะฐะณััะทะบะต `/catalog` ะฝะฐ ะผะพะฑะธะปะบะต (โค 768px) ะบะฐััะฐ **ะะ ะพัะพะฑัะฐะถะฐะตััั**
2. ะะพะปัะทะพะฒะฐัะตะปั ะฒะธะดะธั ัะธะฝัั ะบะฝะพะฟะบั **"ะะพะบะฐะทะฐัั ะบะฐััั"** ๐บ๏ธ
3. ะะปะธะบ ะฝะฐ ะบะฝะพะฟะบั:
   - ะะฐััะฐ ะฟะพัะฒะปัะตััั
   - ะะฒัะพะผะฐัะธัะตัะบะธะน ัะบัะพะปะป ะบ ะบะฐััะต
   - ะขะตะบัั ะบะฝะพะฟะบะธ ะผะตะฝัะตััั ะฝะฐ **"ะกะบัััั ะบะฐััั"**
4. ะะพะฒัะพัะฝัะน ะบะปะธะบ โ ะบะฐััะฐ ัะบััะฒะฐะตััั ัะฝะพะฒะฐ

#### ะขะตัะฝะธัะตัะบะธะต ะดะตัะฐะปะธ:
```javascript
// State ะดะปั ัะฟัะฐะฒะปะตะฝะธั ะฒะธะดะธะผะพัััั ะบะฐััั
const [isMapVisible, setIsMapVisible] = useState(false);

// ะะปะฐัั ะบะฐััั ะฝะฐ ะพัะฝะพะฒะต ัะพััะพัะฝะธั
className={`catalog-top-flex ${isMapVisible ? 'map-visible' : 'map-hidden'}`}
```

**ะคะฐะนะปั:**
- [CatalogPage.jsx](frontend/src/pages/CatalogPage.jsx#L40) - ะปะพะณะธะบะฐ `isMapVisible`
- [CatalogPage.scss](frontend/src/styles/CatalogPage.scss#L250-L280) - ััะธะปะธ `.mobile-show-map-btn`

---

### 3. **Tap Interaction - ะฃะะฃะงะจะะะ** โ

#### **A. ะะปะธะบ ะฝะฐ ะบะฐััะพัะบั ะบะพะผะฟะฐะฝะธะธ:**
- โ **ะขะฐะฟ ะฝะฐ ัะตะบัั/ัะพัะพ/ะปัะฑัั ัะฐััั ะบะฐััะพัะบะธ** โ ะฟะตัะตัะพะด ะฝะฐ ัััะฐะฝะธัั ะบะพะผะฟะฐะฝะธะธ (`/companies/:slug`)
- โ ะัะฟะพะปัะทัะตััั ััะฐะฝะดะฐััะฝัะน `<Link>` ะธะท React Router

#### **B. ะะปะธะบ ะฝะฐ ะฐะดัะตั (ะณะพัะพะด):**
- โ **ะขะฐะฟ ะฝะฐ ะฐะดัะตั ๐ Tallinn** โ ะฟะพะบะฐะทัะฒะฐะตั ะบะฐััั + ะดะตะปะฐะตั flyTo ะบ ะผะฐัะบะตัั ะบะพะผะฟะฐะฝะธะธ
- โ ะะดัะตั ััะฐะป **ะบะฝะพะฟะบะพะน** ั hover-ัััะตะบัะพะผ:
  - ะะพ ัะผะพะปัะฐะฝะธั: ัะฒะตัะปะพ-ัะธะฝะธะน ัะพะฝ `#dbeafe`
  - ะัะธ ะฝะฐะฒะตะดะตะฝะธะธ: ัะธะฝะธะน ัะพะฝ `#3b82f6`, ะฑะตะปัะน ัะตะบัั
  - ะะปะฐะฒะฝะฐั ะฐะฝะธะผะฐัะธั + ัะตะฝั
- โ ะัะตะดะพัะฒัะฐัะฐะตั ะฟะตัะตัะพะด ะฝะฐ ัััะฐะฝะธัั ะบะพะผะฟะฐะฝะธะธ ะฟัะธ ะบะปะธะบะต ะฝะฐ ะฐะดัะตั

#### **C. ะฃะฑัะฐะฝะฐ ะบะฝะพะฟะบะฐ ๐:**
- โ ะะฝะพะฟะบะฐ ๐ ะธะท ะฟัะฐะฒะพะณะพ ะฝะธะถะฝะตะณะพ ัะณะปะฐ ะบะฐััะพัะบะธ **ะะะะะะกะขะฌะฎ ะฃะะะะะะ**
- โ ะั ััะฝะบัะธั ัะตะฟะตัั ะฒัะฟะพะปะฝัะตั ะบะปะธะบะฐะฑะตะปัะฝัะน ะฐะดัะตั

**ะัะธะผะตั ะบะพะดะฐ:**
```jsx
// CompanyCard.jsx
{company.city && (
  <button 
    className="tag-city clickable" 
    onClick={handleCityClick}
    title={t('view_on_map')}
  >
    ๐ {company.city}
  </button>
)}
```

**ะคะฐะนะปั:**
- [CompanyCard.jsx](frontend/src/CompanyCard.jsx#L35-L50) - ะปะพะณะธะบะฐ ะพะฑัะฐะฑะพัะบะธ ะบะปะธะบะพะฒ
- [App.css](frontend/src/App.css#L472-L495) - ััะธะปะธ `.tag-city.clickable`

---

### 4. **ะัะฐะฒะธะปัะฝัะน ะฟะพััะดะพะบ ัะปะตะผะตะฝัะพะฒ ะฝะฐ ะผะพะฑะธะปะบะต** โ

```
๐ฑ ะะะะะะฌะะะฏ ะะะะกะะฏ (โค 768px):
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ๐ต ะะฝะพะฟะบะฐ "ะคะธะปัััั" (ั ะฑะตะนะดะถะตะผ)     โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ โจ ะะพะปะพัะพะน ะฒะธะดะถะตั (Premium ะบะพะผะฟะฐะฝะธั)โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ ๐ ะะฐะณะพะปะพะฒะพะบ "ะะฐัะฐะปะพะณ"              โ
โ    ะะฐะนะดะตะฝะพ ะบะพะผะฟะฐะฝะธะน: 59             โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ ๐บ๏ธ ะะฝะพะฟะบะฐ "ะะพะบะฐะทะฐัั ะบะฐััั"         โ โ ะะะะะ!
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ [ะะะะขะ - ัะบัััะฐ ะฟะพ ัะผะพะปัะฐะฝะธั]       โ โ ะะพัะฒะปัะตััั ะฟะพ ะบะปะธะบั
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ ๐ ะะฐััะพัะบะธ ะบะพะผะฟะฐะฝะธะน (ะฒัะตะณะดะฐ ะฒะธะดะฝั) โ
โ    โโโโโโโโโโโโโโโโโโโโโโโ          โ
โ    โ Auto Fix Oร         โ          โ
โ    โ ๐Tallinn [ะบะปะธะบ โ๐บ๏ธ]โ โ ะะปะธะบะฐะฑะตะปัะฝัะน ะฐะดัะตั
โ    โ ๐ข ะฃัะปัะณะธ           โ          โ
โ    โโโโโโโโโโโโโโโโโโโโโโโ          โ
โ    ...                              โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

**ะะปััะตะฒัะต ะผะพะผะตะฝัั:**
1. ะะพะปะพัะพะน ะฒะธะดะถะตั **ะกะะะะฃ** ะฟะพะด ะบะฝะพะฟะบะพะน ัะธะปัััะพะฒ (ะดะพ ะทะฐะณะพะปะพะฒะบะฐ)
2. ะะฝะพะฟะบะฐ "ะะพะบะฐะทะฐัั ะบะฐััั" **ะะะะะ** ะบะฐััะพะน
3. ะกะฟะธัะพะบ ะบะพะผะฟะฐะฝะธะน **ะะะกะะ** ะบะฐััั (ะฒัะตะณะดะฐ ะฒะธะดะตะฝ)

---

## ๐ ะะทะผะตะฝะตะฝะฝัะต ัะฐะนะปั:

| ะคะฐะนะป | ะะทะผะตะฝะตะฝะธั |
|------|-----------|
| [i18n.js](frontend/src/i18n.js) | ะะพะฑะฐะฒะปะตะฝั ะฟะตัะตะฒะพะดั: `show_map`, `hide_map`, `expand_map`, `collapse_map`, `tap_to_interact` |
| [CatalogPage.jsx](frontend/src/pages/CatalogPage.jsx) | โข State `isMapVisible`<br>โข ะะฝะพะฟะบะฐ "ะะพะบะฐะทะฐัั ะบะฐััั"<br>โข ะะพะณะธะบะฐ `handleScrollToMap` |
| [CatalogPage.scss](frontend/src/styles/CatalogPage.scss) | โข ะกัะธะปะธ `.mobile-show-map-btn`<br>โข ะะปะฐัั `.map-hidden` ะดะปั ัะบัััะธั ะบะฐััั |
| [CompanyCard.jsx](frontend/src/CompanyCard.jsx) | โข ะฃะดะฐะปะตะฝะฐ ะบะฝะพะฟะบะฐ ๐<br>โข ะะดัะตั ััะฐะป ะบะฝะพะฟะบะพะน<br>โข ะคัะฝะบัะธั `handleCityClick` |
| [App.css](frontend/src/App.css) | ะกัะธะปะธ `.tag-city.clickable` (hover, active) |

---

## ๐งช ะขะตััะธัะพะฒะฐะฝะธะต:

### ะะตะถะธะผ ัะฐะทัะฐะฑะพัะบะธ:
```bash
cd frontend
npm run dev
```

### ะัะบัะพะน DevTools (Chrome):
1. `F12` โ Toggle Device Toolbar (`Ctrl+Shift+M`)
2. ะัะฑะตัะธ ััััะพะนััะฒะพ: iPhone 12 Pro / Galaxy S20 (โค 768px)
3. ะัะบัะพะน ัััะฐะฝะธัั: `http://localhost:5173/catalog`

### ะัะพะฒะตัะพัะฝัะน ัะฟะธัะพะบ:

#### โ ะะฐะณััะทะบะฐ ัััะฐะฝะธัั:
- [ ] Sidebar **ัะบััั**
- [ ] ะะฝะพะฟะบะฐ "ะคะธะปัััั" ะฒะธะดะฝะฐ (ัะธะฝัั, ั ะฑะตะนะดะถะตะผ)
- [ ] ะะพะปะพัะพะน ะฒะธะดะถะตั **ะกะะะะฃ** ะฟะพะด ะบะฝะพะฟะบะพะน ัะธะปัััะพะฒ
- [ ] ะะฐััะฐ **ะะ ะพัะพะฑัะฐะถะฐะตััั** (ัะบัััะฐ)
- [ ] ะะฝะพะฟะบะฐ "ะะพะบะฐะทะฐัั ะบะฐััั" **ะฒะธะดะฝะฐ** (ัะธะฝัั, ะณัะฐะดะธะตะฝั)
- [ ] ะกะฟะธัะพะบ ะบะพะผะฟะฐะฝะธะน ะฒะธะดะตะฝ

#### โ ะะปะธะบ ะฝะฐ "ะะพะบะฐะทะฐัั ะบะฐััั":
- [ ] ะะฐััะฐ ะฟะพัะฒะปัะตััั
- [ ] ะะฒัะพะผะฐัะธัะตัะบะธะน ัะบัะพะปะป ะบ ะบะฐััะต
- [ ] ะขะตะบัั ะบะฝะพะฟะบะธ ะผะตะฝัะตััั ะฝะฐ "ะกะบัััั ะบะฐััั"

#### โ ะะปะธะบ ะฝะฐ ะฐะดัะตั ะบะพะผะฟะฐะฝะธะธ (๐ Tallinn):
- [ ] ะะฐััะฐ ะฟะพะบะฐะทัะฒะฐะตััั (ะตัะปะธ ะฑัะปะฐ ัะบัััะฐ)
- [ ] ะะฐััะฐ ะดะตะปะฐะตั flyTo ะบ ะผะฐัะบะตัั ะบะพะผะฟะฐะฝะธะธ
- [ ] ะะฐัะบะตั ะฟะพะดัะฒะตัะธะฒะฐะตััั
- [ ] ะะ ะฟัะพะธััะพะดะธั ะฟะตัะตัะพะด ะฝะฐ ัััะฐะฝะธัั ะบะพะผะฟะฐะฝะธะธ

#### โ ะะปะธะบ ะฝะฐ ะบะฐััะพัะบั ะบะพะผะฟะฐะฝะธะธ (ะฝะต ะฝะฐ ะฐะดัะตั):
- [ ] ะะตัะตัะพะด ะฝะฐ ัััะฐะฝะธัั ะบะพะผะฟะฐะฝะธะธ `/companies/:slug`

#### โ Hover ะฝะฐ ะฐะดัะตัะต:
- [ ] ะคะพะฝ ะผะตะฝัะตััั ั `#dbeafe` ะฝะฐ `#3b82f6`
- [ ] ะขะตะบัั ััะฐะฝะพะฒะธััั ะฑะตะปัะผ
- [ ] ะะพัะฒะปัะตััั ัะตะฝั

---

## ๐ Deployment:

### 1. ะกะฑะพัะบะฐ ะฟัะพะตะบัะฐ:
```bash
cd frontend
npm run build
```

### 2. ะะฐะณััะทะบะฐ ะฝะฐ ัะตัะฒะตั:
```bash
# Use your deployment script
# See deploy*.local.ps1 files for actual deployment commands
```

### 3. ะัะพะฒะตัะบะฐ ะฝะฐ ะฟัะพะดะฐะบัะตะฝะต:
```
https://kontrollitud.ee/catalog
```

ะัะบัะพะน ะฝะฐ ัะตะปะตัะพะฝะต ะธะปะธ ัะตัะตะท ะฑัะฐัะทะตัะฝัะน DevTools (ะผะพะฑะธะปัะฝัะน ัะตะถะธะผ).

---

## ๐จ ะะธะทัะฐะปัะฝัะต ะฟัะธะผะตัั:

### Desktop (> 768px):
- Sidebar ะฒะธะดะฝะฐ ัะปะตะฒะฐ
- ะะฐััะฐ ะฒัะตะณะดะฐ ะฟะพะบะฐะทะฐะฝะฐ (470px ะฒััะพัะฐ)
- ะะพะปะพัะพะน ะฒะธะดะถะตั ัะฟัะฐะฒะฐ ะพั ะบะฐััั
- ะะฝะพะฟะบะฐ "ะะพะบะฐะทะฐัั ะบะฐััั" ัะบัััะฐ

### Mobile (โค 768px):
- Sidebar ัะบัััะฐ โ ะะฝะพะฟะบะฐ "ะคะธะปัััั"
- ะะฐััะฐ ัะบัััะฐ ะฟะพ ัะผะพะปัะฐะฝะธั โ ะะฝะพะฟะบะฐ "ะะพะบะฐะทะฐัั ะบะฐััั"
- ะะพะปะพัะพะน ะฒะธะดะถะตั ะฝะฐ ะฒัั ัะธัะธะฝั (ะกะะะะฃ ะฟะพะด ัะธะปัััะฐะผะธ)
- ะะดัะตั ะบะปะธะบะฐะฑะตะปัะฝัะน (ะฟะพะบะฐะทะฐัั ะบะฐััั)
- ะะฝะพะฟะบะฐ ๐ ัะดะฐะปะตะฝะฐ

---

## โจ ะัะพะณะพ:

โ ะะตัะตะฒะพะดั ะดะพะฑะฐะฒะปะตะฝั ะดะปั ะฒัะตั ัะทัะบะพะฒ (RU, ET, EN)  
โ ะะฐััะฐ ัะบัััะฐ ะฟะพ ัะผะพะปัะฐะฝะธั ะฝะฐ ะผะพะฑะธะปะบะต  
โ ะะฝะพะฟะบะฐ "ะะพะบะฐะทะฐัั ะบะฐััั" / "ะกะบัััั ะบะฐััั"  
โ ะะดัะตั ะบะปะธะบะฐะฑะตะปัะฝัะน โ ะฟะพะบะฐะทัะฒะฐะตั ะบะฐััั + flyTo  
โ ะะฝะพะฟะบะฐ ๐ ัะดะฐะปะตะฝะฐ ั ะบะฐััะพัะตะบ  
โ ะะปะธะบ ะฝะฐ ะบะฐััะพัะบั โ ะฟะตัะตัะพะด ะฝะฐ ัััะฐะฝะธัั ะบะพะผะฟะฐะฝะธะธ  
โ ะัะฐะฒะธะปัะฝัะน ะฟะพััะดะพะบ: ะคะธะปัััั โ ะะธะดะถะตั โ ะะฐะณะพะปะพะฒะพะบ โ ะะฝะพะฟะบะฐ ะบะฐััั โ ะกะฟะธัะพะบ  

**ะะพัะพะฒะพ ะบ ัะตััะธัะพะฒะฐะฝะธั ะธ deployment!** ๐

---

## ๐ง Troubleshooting:

### ะะฐััะฐ ะฝะต ัะบััะฒะฐะตััั ะฝะฐ ะผะพะฑะธะปะบะต:
- ะัะพะฒะตัั ััะพ ะบะปะฐัั `.map-hidden` ะฟัะธะผะตะฝัะตััั ะบ `.catalog-top-flex`
- ะัะพะฒะตัั ััะพ `isMapVisible` = `false` ะฟัะธ ะทะฐะณััะทะบะต ะฝะฐ ะผะพะฑะธะปะบะต

### ะะปะธะบ ะฝะฐ ะฐะดัะตั ะฝะต ะพัะบััะฒะฐะตั ะบะฐััั:
- ะัะพะฒะตัั ััะพ `handleCityClick` ะฒัะทัะฒะฐะตั `onMapClick`
- ะัะพะฒะตัั ััะพ `handleScrollToMap` ัััะฐะฝะฐะฒะปะธะฒะฐะตั `setIsMapVisible(true)`

### ะะตัะตะฒะพะดั ะฝะต ัะฐะฑะพัะฐัั:
- ะัะพะฒะตัั ััะพ i18n ะธะฝะธัะธะฐะปะธะทะธัะพะฒะฐะฝ ะฒ `main.jsx`
- ะัะพะฒะตัั ััะพ ะบะปััะธ ะดะพะฑะฐะฒะปะตะฝั ะฒะพ ะฒัะต 3 ัะทัะบะฐ (ru, et, en)

---

**ะะฐัะฐ ะพะฑะฝะพะฒะปะตะฝะธั:** 2026-02-12  
**ะะตััะธั:** Final (v2)
