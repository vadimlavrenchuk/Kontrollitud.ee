# Deployment Scripts - Guide

## –ü—Ä–æ–±–ª–µ–º–∞ —Å Docker –æ–±—Ä–∞–∑–∞–º–∏

–ü—Ä–∏ –¥–µ–ø–ª–æ–µ –≤–æ–∑–Ω–∏–∫–∞–ª–∞ –æ—à–∏–±–∫–∞:
```
ERROR: No such image: sha256:...
The image for the service you're trying to recreate has been removed.
```

**–ü—Ä–∏—á–∏–Ω–∞:** Docker —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π –æ–±—Ä–∞–∑ –ø—Ä–∏ `build`, –Ω–æ —Å—Ç–∞—Ä—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø—ã—Ç–∞–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç–∞—Ä—ã–π —Ö–µ—à –æ–±—Ä–∞–∑–∞.

**–†–µ—à–µ–Ω–∏–µ:** –í—Å–µ–≥–¥–∞ –¥–µ–ª–∞—Ç—å `docker-compose down` –ü–ï–†–ï–î `build`, —á—Ç–æ–±—ã —É–¥–∞–ª–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã.

## –î–æ—Å—Ç—É–ø–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã

### 1. deploy-fast-fixed.ps1 ‚ö° (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
–ë—ã—Å—Ç—Ä—ã–π –¥–µ–ø–ª–æ–π —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é –∫–æ–º–∞–Ω–¥.

```powershell
.\deploy-fast-fixed.ps1
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
1. `git pull` - –ø–æ–ª—É—á–∞–µ—Ç –∫–æ–¥
2. `docker-compose down` - –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
3. `docker-compose build` - —Å–æ–±–∏—Ä–∞–µ—Ç —Å –∫–µ—à–µ–º
4. `docker-compose up -d` - –∑–∞–ø—É—Å–∫–∞–µ—Ç

**–í—Ä–µ–º—è:** ~1-2 –º–∏–Ω—É—Ç—ã

---

### 2. deploy-stable.ps1 üõ°Ô∏è (–ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ–∑–±–æ—Ä–∫–∞)
–ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –±–µ–∑ –∫–µ—à–∞. –î–ª—è –±–æ–ª—å—à–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –∏–ª–∏ –ø—Ä–æ–±–ª–µ–º.

```powershell
.\deploy-stable.ps1
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
1. `git pull`
2. `docker-compose down`
3. `docker image prune -f` - —á–∏—Å—Ç–∏—Ç —Å—Ç–∞—Ä—ã–µ –æ–±—Ä–∞–∑—ã
4. `docker-compose build --no-cache` - —Å–æ–±–∏—Ä–∞–µ—Ç –±–µ–∑ –∫–µ—à–∞
5. `docker-compose up -d`
6. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

**–í—Ä–µ–º—è:** ~3-5 –º–∏–Ω—É—Ç

---

### 3. deploy-quick.ps1 (–°—Ç–∞—Ä—ã–π –º–µ—Ç–æ–¥)
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç tar –∞—Ä—Ö–∏–≤. –ú–µ–¥–ª–µ–Ω–Ω–µ–µ —á–µ–º Git.

---

## –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

| –°–∏—Ç—É–∞—Ü–∏—è | –°–∫—Ä–∏–ø—Ç |
|----------|--------|
| –û–±—ã—á–Ω—ã–π –¥–µ–ø–ª–æ–π (CSS, JS, —Ç–µ–∫—Å—Ç) | `deploy-fast-fixed.ps1` |
| –ü—Ä–æ–±–ª–µ–º—ã —Å –∫–µ—à–µ–º | `deploy-stable.ps1` |
| –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ Dockerfile | `deploy-stable.ps1` |
| –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è—Ö | `deploy-stable.ps1` |

## –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å Docker –∫–æ–º–∞–Ω–¥

### ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û (–≤—ã–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏)
```bash
git pull
docker-compose build
docker-compose up -d  # ‚ùå –û—à–∏–±–∫–∞: —Å—Ç–∞—Ä—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å –Ω–æ–≤—ã–º –æ–±—Ä–∞–∑–æ–º
```

### ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û
```bash
git pull
docker-compose down    # –°–Ω–∞—á–∞–ª–∞ —É–¥–∞–ª—è–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker-compose build   # –ü–æ—Ç–æ–º —Å–æ–±–∏—Ä–∞–µ–º –æ–±—Ä–∞–∑—ã
docker-compose up -d   # –ü–æ—Ç–æ–º —Å–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
```

## –†—É—á–Ω–æ–π –¥–µ–ø–ª–æ–π (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

```powershell
# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh root@YOUR_SERVER

# –ü–µ—Ä–µ—Ö–æ–¥ –≤ –ø–∞–ø–∫—É
cd /path/to/project

# –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–¥–∞
git pull

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ (–í–ê–ñ–ù–û!)
docker-compose down

# –°–±–æ—Ä–∫–∞
docker-compose build

# –ó–∞–ø—É—Å–∫
docker-compose up -d

# –ü—Ä–æ–≤–µ—Ä–∫–∞
docker ps
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤

```powershell
# –í—Å–µ –ª–æ–≥–∏
ssh root@YOUR_SERVER "docker-compose logs"

# –¢–æ–ª—å–∫–æ frontend
ssh root@YOUR_SERVER "docker-compose logs frontend"

# –¢–æ–ª—å–∫–æ backend
ssh root@YOUR_SERVER "docker-compose logs backend"

# Live logs (—Å–ª–µ–¥–∏—Ç—å –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏)
ssh root@YOUR_SERVER "docker-compose logs -f"
```

## –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```powershell
# –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
ssh root@YOUR_SERVER "docker ps"

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –æ–¥–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
ssh root@YOUR_SERVER "docker-compose restart frontend"

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ–≥–æ
ssh root@YOUR_SERVER "docker-compose down"

# –û—á–∏—Å—Ç–∫–∞ –≤—Å–µ—Ö —Å—Ç–∞—Ä—ã—Ö –æ–±—Ä–∞–∑–æ–≤
ssh root@YOUR_SERVER "docker system prune -a"
```

## Troubleshooting

### –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
```powershell
# –°–º–æ—Ç—Ä–∏–º –ª–æ–≥–∏
ssh root@YOUR_SERVER "docker-compose logs frontend"

# –ü–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ–º –±–µ–∑ –∫–µ—à–∞
.\deploy-stable.ps1
```

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –Ω–µ –ø—Ä–∏–º–µ–Ω–∏–ª–∏—Å—å
```powershell
# –ñ–µ—Å—Ç–∫–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –±—Ä–∞—É–∑–µ—Ä–∞
Ctrl + Shift + R (Windows/Linux)
Cmd + Shift + R (Mac)

# –ò–ª–∏ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –±–µ–∑ –∫–µ—à–∞
.\deploy-stable.ps1
```

### "No such image" –æ—à–∏–±–∫–∞
```powershell
# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ deploy-fast-fixed.ps1
# –û–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –ø–µ—Ä–µ–¥ –±–∏–ª–¥–æ–º
.\deploy-fast-fixed.ps1
```

## –†–µ–∑—é–º–µ

**–ì–ª–∞–≤–Ω–æ–µ –ø—Ä–∞–≤–∏–ª–æ:** –í—Å–µ–≥–¥–∞ –¥–µ–ª–∞–π—Ç–µ `docker-compose down` –ø–µ—Ä–µ–¥ `docker-compose build`!

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≥–æ—Ç–æ–≤—ã–µ —Å–∫—Ä–∏–ø—Ç—ã:
- **deploy-fast-fixed.ps1** - –¥–ª—è –æ–±—ã—á–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è
- **deploy-stable.ps1** - –¥–ª—è –ø–æ–ª–Ω–æ–π –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏
