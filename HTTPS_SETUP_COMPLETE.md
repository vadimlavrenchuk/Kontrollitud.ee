# ‚úÖ HTTPS –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è Kontrollitud.ee

## –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. –û–±–Ω–æ–≤–ª–µ–Ω nginx.conf
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ HTTPS (–ø–æ—Ä—Ç 443)
- ‚úÖ HTTP –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ HTTPS
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã security headers (X-Frame-Options, X-Content-Type-Options –∏ –¥—Ä.)
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ Let's Encrypt –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- ‚úÖ –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ SSL –ø—Ä–æ—Ç–æ–∫–æ–ª—ã (TLS 1.2, 1.3)

### 2. –°–æ–∑–¥–∞–Ω—ã SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- ‚úÖ –ü–∞–ø–∫–∞ `ssl/` —Å —Å–∞–º–æ–ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–º–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º–∏
- ‚úÖ –°–∫—Ä–∏–ø—Ç `generate-ssl-certs.ps1` –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –Ω–æ–≤—ã—Ö —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –≤ `.gitignore` (–Ω–µ –±—É–¥—É—Ç –∫–æ–º–º–∏—Ç–∏—Ç—å—Å—è –≤ git)

### 3. –û–±–Ω–æ–≤–ª–µ–Ω docker-compose.yml
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –ø–æ—Ä—Ç 3443 –¥–ª—è HTTPS
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω volume –¥–ª—è –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
- ‚úÖ –ì–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –∏ –ª–æ–∫–∞–ª—å–Ω–æ, –∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```powershell
# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker-compose down
docker-compose up --build
```

–°–∞–π—Ç –¥–æ—Å—Ç—É–ø–µ–Ω:
- **HTTP**: http://localhost:3000 ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–∏—Ç –Ω–∞ HTTPS
- **HTTPS**: https://localhost:3443

‚ö†Ô∏è –ë—Ä–∞—É–∑–µ—Ä –ø–æ–∫–∞–∂–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ —Å–∞–º–æ–ø–æ–¥–ø–∏—Å–∞–Ω–Ω–æ–º —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–µ - —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ!
–ù–∞–∂–º–∏—Ç–µ "–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ" ‚Üí "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –Ω–∞ localhost"

### Production —Å–µ—Ä–≤–µ—Ä

–°–º–æ—Ç—Ä–∏—Ç–µ –ø–æ–¥—Ä–æ–±–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤ —Ñ–∞–π–ª–µ [PRODUCTION_HTTPS_UPDATE.md](PRODUCTION_HTTPS_UPDATE.md)

–ö—Ä–∞—Ç–∫–æ:
1. –ó–∞–ª–µ–π—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä: `git pull`
2. –û–±–Ω–æ–≤–∏—Ç–µ docker-compose.yml (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Let's Encrypt —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã)
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ: `docker-compose down && docker-compose up -d --build`

## üìÅ –§–∞–π–ª—ã

| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| [frontend/nginx.conf](frontend/nginx.conf) | –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è nginx —Å HTTPS |
| [docker-compose.yml](docker-compose.yml) | –û–±–Ω–æ–≤–ª–µ–Ω —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π HTTPS |
| [generate-ssl-certs.ps1](generate-ssl-certs.ps1) | –°–∫—Ä–∏–ø—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ |
| [LOCAL_HTTPS_SETUP.md](LOCAL_HTTPS_SETUP.md) | –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ HTTPS –ª–æ–∫–∞–ª—å–Ω–æ |
| [PRODUCTION_HTTPS_UPDATE.md](PRODUCTION_HTTPS_UPDATE.md) | –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—é –Ω–∞ production |
| [ssl/](ssl/) | –ü–∞–ø–∫–∞ —Å SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º–∏ (–Ω–µ –∫–æ–º–º–∏—Ç–∏—Ç—Å—è) |

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤–∫–ª—é—á–∞–µ—Ç:
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ HTTP ‚Üí HTTPS
- ‚úÖ TLS 1.2 –∏ 1.3 (—Å—Ç–∞—Ä—ã–µ –≤–µ—Ä—Å–∏–∏ –æ—Ç–∫–ª—é—á–µ–Ω—ã)
- ‚úÖ –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ cipher suites
- ‚úÖ Security headers:
  - X-Frame-Options: SAMEORIGIN (–∑–∞—â–∏—Ç–∞ –æ—Ç clickjacking)
  - X-Content-Type-Options: nosniff (–∑–∞—â–∏—Ç–∞ –æ—Ç MIME sniffing)
  - X-XSS-Protection: 1; mode=block (–∑–∞—â–∏—Ç–∞ –æ—Ç XSS)
  - Referrer-Policy: strict-origin-when-cross-origin

## üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ nginx
docker-compose exec frontend nginx -t

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker-compose logs frontend

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è HTTP ‚Üí HTTPS
curl -I http://localhost:3000
# –î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å: 301 Moved Permanently

# –ü—Ä–æ–≤–µ—Ä–∫–∞ HTTPS
curl -k -I https://localhost:3443
# –î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å: 200 OK
```

## ‚ùì –ü—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### –ë—Ä–∞—É–∑–µ—Ä –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "–í–∞—à–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –Ω–µ –∑–∞—â–∏—â–µ–Ω–æ"
- –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è —Å–∞–º–æ–ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã—Ö —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ –ª–æ–∫–∞–ª—å–Ω–æ
- –ù–∞–∂–º–∏—Ç–µ "–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ" ‚Üí "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å"
- –ù–∞ production —Å–µ—Ä–≤–µ—Ä–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Let's Encrypt

### –ü–æ—Ä—Ç 3443 —É–∂–µ –∑–∞–Ω—è—Ç
–ò–∑–º–µ–Ω–∏—Ç–µ –ø–æ—Ä—Ç –≤ docker-compose.yml:
```yaml
ports:
  - "8443:443"  # –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥—Ä—É–≥–æ–π –ª–æ–∫–∞–ª—å–Ω—ã–π –ø–æ—Ä—Ç
```

### –û—à–∏–±–∫–∞ "SSL certificate not found"
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã —Å–æ–∑–¥–∞–Ω—ã:
```powershell
.\generate-ssl-certs.ps1
```

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

- [LOCAL_HTTPS_SETUP.md](LOCAL_HTTPS_SETUP.md) - –¥–µ—Ç–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- [PRODUCTION_HTTPS_UPDATE.md](PRODUCTION_HTTPS_UPDATE.md) - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ production —Å–µ—Ä–≤–µ—Ä–∞
- [NGINX_PROXY.md](NGINX_PROXY.md) - –æ–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ nginx proxy

---

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è nginx —Ç–µ–ø–µ—Ä—å –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ —Å –≤–∞—à–∏–º production —Å–µ—Ä–≤–µ—Ä–æ–º. –í—ã –º–æ–∂–µ—Ç–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ –∏ –¥–µ–ø–ª–æ–∏—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä –±–µ–∑ —Ä–∏—Å–∫–∞ —á—Ç–æ-—Ç–æ —Å–ª–æ–º–∞—Ç—å! üéâ
